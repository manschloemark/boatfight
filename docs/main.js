(()=>{var e={28:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(645),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,':root {\n    font-family: "Noto Sans", sans-serif;\n    font-size: 16pt;\n\n    --bgcolor: #242424;\n    --lightbgcolor: #484848;\n    --bgcontrast: #eaeaea;\n    --active-board-background: #006020;\n    --inactive-board-background: #a00000;\n}\n\nhtml, body {\n    margin: 0;\n    padding: 0;\n    background-color: #242424;\n    color: #eaeaea;\n}\n\nhtml {\n    width: 100%;\n    height: 100%;\n}\n\nbody {\n    width: 100%;\n    height: 100%;\n}\n\nheader {\n    padding: 0 10%;\n}\n\n#header-title {\n    font-size: 1.4em;\n    font-weight: bold;\n    margin: 0;\n    padding: 1em 0;\n}\n\nmain {\n    width: 100%;\n}\n\nmain div {\n    margin: auto;\n}\n\nbutton {\n    font-size: 1em;\n    height: 2em;\n    background-color: rgba(240, 240, 240, 0.8);\n    color: black;\n    border: 2px solid rgba(200, 200, 200, 0.9);\n    border-radius: 6px;\n}\n/* \n    Start screen styling\n*/\n#start-menu {\n    width: 60%;\n    display: flex;\n    flex-direction: column;\n    align-content: center;\n\n    text-align: center;\n}\n\n#player-creation {\n    margin: 0;\n    display: flex;\n    justify-content: space-evenly;\n}\n\n.player-entry {\n    display: grid;\n    grid-template-areas: "player-number player-number"\n                         "name-label name-entry"\n                         "cpu-label cpu-checkbox";\n\n    gap: 1em;\n    border-radius: 8px;\n    background-color: #484848;\n    padding: 0 1em 1em 1em;\n}\n\n.player-number {\n    grid-area: player-number;\n}\n\n.name-label {\n    grid-area: name-label;\n\n    text-align: left;\n}\n\n.player-name {\n    grid-area: name-entry;\n\n    background-color: #eaeaea;\n    color: #242424;\n    font-size: 0.9em;\n    border-radius: 8px;\n    padding: 0 0.4em;\n}\n\n.is-cpu-label {\n    grid-area: cpu-label;\n\n    text-align: left;\n}\n\n.is-cpu {\n    grid-area: cpu-checkbox;\n    width: min-content;\n    background-color: #eaeaea;\n}\n\n#new-game {\n    width: 10%;\n    min-width: min-content;\n    margin: 1em auto;\n    font-size: 1.2em;\n}\n\n#game-over {\n    position: absolute;\n    top: 30%;\n    width: 40%;\n    padding: 2%;\n    left: 28%;\n    border-radius: 1em;\n    background-color:rgba(36, 36, 36, 0.5);\n    text-align: center;\n}\n\n#game-over-controls {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n}\n\n#game-over-controls button {\n    width: 40%;\n}\n\n\n/* Battle styles - game boards, ships, docks */\n\n#in-game {\n    display: flex;\n    flex-direction: column;\n}\n\n.player-container {\n    margin-top: 0;\n}\n\n.player-header {\n    display: flex;\n}\n\n#player-one .player-header {\n    flex-direction: row;\n}\n\n#player-two .player-header {\n    flex-direction: row-reverse;\n}\n\n#player-one .name {\n    text-align: left;\n}\n\n#player-two .name {\n    text-align: right;\n}\n\n.name {\n    font-size: 1.2em;\n    margin: 0 1em;\n    max-width: 200px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    /* flex-grow: 1; */\n}\n\n.name:hover {\n    overflow: visible;\n    cursor: default;\n}\n\n.turn-indicator {\n    margin: auto 0;\n    height: 1em;\n    width: 1em;\n    border-radius: 100%;\n\n    /* border: 2px solid #242424; */\n    background-image: radial-gradient(circle at top 30% left 40%, rgba(255, 255, 255, 0.5) 0, transparent 40%, rgba(0, 0, 0, 0.8) 90%);\n}\n\n.player-container.idle .turn-indicator {\n    background-color: #aa2424;\n    box-shadow: 0 0 12px 2px #aa2424;\n}\n\n.player-container.is-turn .turn-indicator {\n    background-color: #24aa24;\n    box-shadow: 0 0 12px 2px #24aa24;\n}\n\n#player-flex-box{\n    display: flex;\n    flex-direction: row;\n    justify-content: space-evenly;\n    flex-wrap: wrap;\n    width: 100%;\n    margin: auto;\n}\n\n#instructions{\n    text-align: center;\n}\n\n.player-container {\n    padding: 0 1em 1em 1em;\n    background-color: var(--lightbgcolor);\n    border-radius: 16px;\n}\n\n.player-container.is-turn {\n    /* box-shadow: 0 0 12px 8px var(--active-board-background); */\n}\n\n.player-container.idle {\n    /* box-shadow: 0 0 12px 8px var(--inactive-board-background); */\n}\n\n.game-board {\n    display: grid;\n    /* gap: 2px; */\n    max-width: min-content;\n    place-content: center center;\n}\n\n.tile {\n    /* width: 64px;\n    height: 64px; */\n    background-color: #244288;\n    text-align: center;\n    font-size: 18pt;\n    font-family: monospace;\n    border: 1px solid var(--bgcolor);\n}\n\n.game-board .tile.unknown:hover {\n    background-color: #eaed4e;\n    cursor: pointer;\n}\n\n.tile.empty {\n    background-color: var(--bgcontrast);\n}\n\n.tile.ship {\n    background-color: #696969;\n    /* border: 1px solid #696969; */\n}\n\n.tile.damaged {\n    background-color: #a00000;\n    /* border: 1px solid #a00000; */\n}\n\n.tile.up-one {\n    border-top: 1px dashed var(--bgcolor);\n}\n\n.tile.down-one {\n    border-bottom: 1px dashed var(--bgcolor);\n}\n\n.tile.right-one {\n    border-right: 1px dashed var(--bgcolor);\n}\n\n.tile.left-one {\n    border-left: 1px dashed var(--bgcolor);\n}\n\n.tile.valid-ship-placement {\n    background-color: #24aa24;\n}\n\n.tile.invalid-ship-placement {\n    background-color: #aa2424;\n}\n\n#ship-dock {\n    display: flex;\n    flex-direction: column;\n    background-color: var(--lightbgcolor);\n    min-width: 600px;\n    min-height: 600px;\n    max-width: 600px;\n    border-radius: 16px;\n}\n\n#ship-dock.inactive *{\n    display: none;\n}\n\n#ship-container {\n    box-shadow: 0 2px 8px black inset;\n    background-color: #306230;\n    margin: 1em;\n    flex-grow: 1;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-content: baseline;\n    flex-wrap: wrap;\n}\n\n#ship-placement-controls {\n    margin: 0 auto 1em auto;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n\n    width: 80%;\n}\n\n#ship-placement-controls button {\n    width: 32%;\n    min-width: min-content;\n    margin: 1em 0;\n}\n\n.placeable-ship {\n    margin: 1em 0.5em;\n    background-color: #696969;\n    box-shadow: 0 0 2px #fafaea;\n    transform: scale(0.85, 0.85);\n}\n\n#turn-switch {\n    position: absolute;\n    opacity: 0;\n    width: 100%;\n    transition: opacity 0.75s;\n    background-color: var(--bgcolor);\n    text-align: center;\n    z-index: 999;\n}\n\n#turn-switch.show {\n    opacity: 100;\n}\n\n#turn-switch :first-child {\n    padding-top: 10%;\n}\n\n.hidden {\n    display: none !important;\n}',""]);const a=r},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(i)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(r[s]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);i&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},379:(e,t,n)=>{"use strict";var i,r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function o(e,t){for(var n={},i=[],r=0;r<e.length;r++){var o=e[r],l=t.base?o[0]+t.base:o[0],d=n[l]||0,c="".concat(l," ").concat(d);n[l]=d+1;var h=s(c),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(a[h].references++,a[h].updater(p)):a.push({identifier:c,updater:g(p,t),references:1}),i.push(c)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var a=n.nc;a&&(i.nonce=a)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var s=r(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var d,c=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function h(e,t,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=c(t,r);else{var a=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function p(e,t,n){var i=n.css,r=n.media,a=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var u=null,m=0;function g(e,t){var n,i,r;if(t.singleton){var a=m++;n=u||(u=l(t)),i=h.bind(null,n,a,!1),r=h.bind(null,n,a,!0)}else n=l(t),i=p.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var r=s(n[i]);a[r].references--}for(var l=o(e,t),d=0;d<n.length;d++){var c=s(n[d]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}n=l}}}},733:(e,t,n)=>{const i=n(497);e.exports=(e,t)=>{const n=e,r=t;let a,s;const o=()=>{a=new Array,s=new Array(n);for(let e=0;e<n;e++)s[e]=new Array(r).fill(null)},l=(e,t)=>{if(e<0||e>=s.length||t<0||t>=s[e].length)return!1;for(let n=e-1;n<=e+1;n++)for(let e=t-1;e<=t+1;e++)if(n>=0&&n<s.length&&e>=0&&e<s[n].length&&s[n][e])return!1;return!0};return o(),{width:r,height:n,viewBoard:()=>s.map((e=>e.slice(0))),validateCoordinates:l,placeShip:(e,t,n,r)=>{const o=((e,t,n,i)=>{let r=new Array;if(i)for(let i=0;i<n;i++)r.push([e,t+i]);else for(let i=0;i<n;i++)r.push([e+i,t]);return r})(e,t,n,r=r||!1);if(o.some((e=>!l(...e))))throw new RangeError("Could not place ship. Ships cannot be within one tile of existing ships.");const d=i(n),c=a.length;a.push(d);for(let e=0;e<o.length;e++){let[t,n]=o[e];s[t][n]={shipIndex:c,shipOffset:e,isHit:!1}}},removeShips:()=>(removedShips=a.slice(0).map((e=>e.getLength())),o(),removedShips),receiveAttack:(e,t)=>{try{const n=s[e][t];if(!n)return s[e][t]=!1,!1;if(!n.isHit)return a[n.shipIndex].hit(n.shipOffset),n.isHit=!0,!0}catch(e){throw e}return!1},allShipsSunk:()=>a.every((e=>e.isSunk()))}}},324:function(e){const t=(()=>{this.turnSwitch=document.querySelector("#turn-switch"),this.startMenu=document.querySelector("#start-menu"),this.inGame=document.querySelector("#in-game"),this.gameOver=document.querySelector("#game-over"),this.playerOneElement=document.querySelector("#player-one"),this.playerTwoElement=document.querySelector("#player-two"),this.dockElement=document.querySelector("#ship-dock"),this.betweenTurns=!1;const e=()=>{const e=document.querySelector("header").clientHeight;document.documentElement.clientWidth;let t=document.documentElement.clientHeight;t-=e,this.turnSwitch.style.top=e+"px",this.turnSwitch.style.left=0,this.turnSwitch.style.height=t+"px",this.turnSwitch.classList.add("show")},t=()=>{this.turnSwitch.classList.remove("show")},n=e=>{for(;e.hasChildNodes();)e.removeChild(e.firstChild)},i=(e,t)=>{e.style.gridTemplateRows=`repeat(${t.height}, 1fr)`,e.style.gridTemplateColumns=`repeat(${t.width}, 1fr)`},r=(e,t)=>{i(e,t.gameboard),this.tileSize=document.documentElement.clientHeight/18,t.isTurn?(e.classList.add("active"),e.classList.remove("idle")):(e.classList.add("idle"),e.classList.remove("active"));const n=t.gameboard.viewBoard(),r=t.gameboard.height,a=t.gameboard.width;for(let i=0;i<r;i++)for(let r=0;r<a;r++){let a=document.createElement("div");if(a.style.width=this.tileSize+"px",a.style.height=this.tileSize+"px",a.dataset.row=i,a.dataset.column=r,a.classList.add("tile"),n[i][r])if(n[i][r].isHit){a.classList.add("damaged");try{(n[i-1][r]&&t.isTurn||n[i-1][r].isHit)&&a.classList.add("up-one")}catch(e){}try{(n[i+1][r]&&t.isTurn||n[i+1][r].isHit)&&a.classList.add("down-one")}catch(e){}try{(n[i][r+1]&&t.isTurn||n[i][r+1].isHit)&&a.classList.add("right-one")}catch(e){}try{(n[i][r-1]&&t.isTurn||n[i][r-1].isHit)&&a.classList.add("left-one")}catch(e){}}else if(t.isTurn){a.classList.add("ship");try{n[i-1][r]&&a.classList.add("up-one")}catch(e){}try{n[i+1][r]&&a.classList.add("down-one")}catch(e){}try{n[i][r+1]&&a.classList.add("right-one")}catch(e){}try{n[i][r-1]&&a.classList.add("left-one")}catch(e){}}else a.classList.add("unknown");else!1===n[i][r]?a.classList.add("empty"):a.classList.add("unknown");e.appendChild(a)}},a=e=>{const t=e.target,n="true"==t.dataset.horizontal;t.dataset.horizontal=!n,"true"==t.dataset.horizontal?(shortSide="height",longSide="width"):(shortSide="width",longSide="height"),t.style[shortSide]=this.tileSize+"px",t.style[longSide]=this.tileSize*parseInt(t.dataset.size)+"px"},s=(e,t,n)=>{let i;i=e.isTurn?e:t;const r=i.getUnplacedShips();for(let e=0;e<r.length;e++){let t=document.createElement("div");t.draggable=!0,t.dataset.size=r[e],t.dataset.horizontal=!1,t.classList.add("placeable-ship"),t.style.height=this.tileSize*r[e]+"px",t.style.width=this.tileSize+"px",t.addEventListener("click",(e=>{a(e)})),t.addEventListener("drag",(e=>{})),t.addEventListener("dragstart",(e=>{draggedShip=e.target})),n.appendChild(t)}};return this.turnSwitch.addEventListener("transitionend",(e=>{"opacity"==e.propertyName&&(this.betweenTurns||e.target.classList.add("hidden"))})),{showStartMenu:()=>{this.startMenu.classList.remove("hidden"),this.inGame.classList.add("hidden"),this.gameOver.classList.add("hidden")},showGameUI:()=>{this.inGame.classList.remove("hidden"),this.startMenu.classList.add("hidden"),this.gameOver.classList.add("hidden")},showTurnSwitch:e,hideTurnSwitch:t,showGameOver:()=>{this.gameOver.classList.remove("hidden")},switchSides:(i,r,a)=>{let s,o;this.betweenTurns=!0,this.turnSwitch.classList.remove("hidden"),i.isTurn?(s=i.name,o=r.name):(s=r.name,o=i.name),n(this.turnSwitch);const l=document.createElement("p");l.textContent=`Handing control to ${s}.`;const d=document.createElement("p");d.textContent=`No peeking, ${o}!`;const c=document.createElement("button");c.textContent="Ready",c.addEventListener("click",(e=>{this.betweenTurns=!1,t(),a(i,r)})),this.turnSwitch.appendChild(l),this.turnSwitch.appendChild(d),this.turnSwitch.appendChild(c),e()},showPlayerElements:()=>{this.playerOneElement.classList.remove("hidden"),this.playerTwoElement.classList.remove("hidden")},readPlayerInput:()=>{const e=document.querySelectorAll(".player-entry"),t=[];return e.forEach((e=>{let n=e.querySelector(".player-name").value;""==n&&(n=e.querySelector("h3").textContent);let i=e.querySelector(".is-cpu").checked;t.push([i,n])})),t},clearContainer:n,setBoardGrid:i,renderPlayerNames:(e,t)=>{this.playerOneElement.querySelector(".name").textContent=e.name,this.playerTwoElement.querySelector(".name").textContent=t.name},renderBoard:r,renderBoards:(e,t)=>{e.isTurn?(this.playerOneElement.classList.add("is-turn"),this.playerTwoElement.classList.remove("is-turn"),this.playerOneElement.classList.remove("idle"),this.playerTwoElement.classList.add("idle")):(this.playerOneElement.classList.remove("is-turn"),this.playerTwoElement.classList.add("is-turn"),this.playerOneElement.classList.add("idle"),this.playerTwoElement.classList.remove("idle"));let n=this.playerOneElement.querySelector(".game-board"),i=this.playerTwoElement.querySelector(".game-board");this.playerOneElement.removeChild(n),this.playerTwoElement.removeChild(i),n=document.createElement("div"),i=document.createElement("div"),n.classList.add("game-board"),i.classList.add("game-board"),this.playerOneElement.appendChild(n),this.playerTwoElement.appendChild(i),r(n,e),r(i,t)},renderDocks:(e,t,i,r,a)=>{let o;e.isTurn?(o=e.unplacedShips,grid=this.playerOneElement.querySelector(".game-board"),this.playerOneElement.classList.remove("hidden"),this.playerTwoElement.classList.add("hidden")):(o=t.unplacedShips,grid=this.playerTwoElement.querySelector(".game-board"),this.playerTwoElement.classList.remove("hidden"),this.playerOneElement.classList.add("hidden")),this.dockElement.classList.remove("hidden");let l=this.dockElement.querySelector("#ship-container"),d=this.dockElement.querySelector("#ship-placement-controls");n(d);const c=document.createElement("button");c.textContent="Reset",c.classList.add("reset-ships"),c.type="button";const h=document.createElement("button");h.textContent="Randomize",h.classList.add("randomize-ships"),h.type="button";const p=document.createElement("button");p.textContent="Ready",p.classList.add("ready-up"),p.type="button",c.addEventListener("click",(n=>{i(e,t)})),h.addEventListener("click",(n=>{r(e,t,o)})),p.addEventListener("click",(n=>{a(e,t)})),d.appendChild(c),d.appendChild(h),d.appendChild(p),n(l),s(e,t,l)},clearDockButtons:()=>{n(document.querySelector("#ship-placement-controls")),this.dockElement.classList.add("hidden")},addShipPlacementListeners:(e,t,n)=>{let i,r;e.isTurn?(i=this.playerOneElement.querySelector(".game-board"),r=e.gameboard):(i=this.playerTwoElement.querySelector(".game-board"),r=t.gameboard),i.addEventListener("dragover",(e=>e.preventDefault())),i.addEventListener("dragenter",(e=>{if(!e.target.classList.contains("tile"))return;const t=draggedShip.dataset.size,n="true"==draggedShip.dataset.horizontal,a=e.target,s=parseInt(a.dataset.row),o=parseInt(a.dataset.column),l=[];for(let e=0;e<t;e++)n?l.push([s,o+e]):l.push([s+e,o]);let d,c,h,p;d=l.some((e=>!r.validateCoordinates(...e)))?"invalid-ship-placement":"valid-ship-placement";for(let e=0;e<l.length;e++)[c,h]=l[e],p=i.querySelector(`[data-row="${c}"][data-column="${h}"]`),p&&p.classList.add(d)})),i.addEventListener("dragexit",(e=>{i.querySelectorAll(".invalid-ship-placement").forEach((e=>{e.classList.remove("invalid-ship-placement")})),i.querySelectorAll(".valid-ship-placement").forEach((e=>{e.classList.remove("valid-ship-placement")}))})),i.addEventListener("drop",(r=>{if(r.preventDefault(),r.target.classList.contains("valid-ship-placement")){const i=parseInt(r.target.dataset.row),a=parseInt(r.target.dataset.column),s=parseInt(draggedShip.dataset.size),o="true"==draggedShip.dataset.horizontal;n(e,t,i,a,s,o)}else i.querySelectorAll(".invalid-ship-placement").forEach((e=>{e.classList.remove("invalid-ship-placement")}))}))},addAttackListeners:(e,t,n)=>{let i;e.isTurn?(i=this.playerTwoElement.querySelector(".game-board"),i.querySelectorAll(".tile.unknown").forEach((i=>{i.addEventListener("click",(i=>{n(e,t,i)}))}))):(i=this.playerOneElement.querySelector(".game-board"),i.querySelectorAll(".tile.unknown").forEach((i=>{i.addEventListener("click",(i=>{n(e,t,i)}))})))},displayInstructions:e=>{document.querySelector("#instructions").textContent=e},displayWinner:(e,t)=>{this.gameOver.querySelector("#winner").textContent=e.name+" wins!",this.gameOver.querySelector("#loser").textContent="Sorry, "+t.name+"...",this.gameOver.querySelector("#winner-stats").textContent=`${e.name} fired ${e.playHistory.length} shots`,this.gameOver.querySelector("#loser-stats").textContent=`${t.name} fired ${t.playHistory.length} shots`}}})();e.exports=t},507:e=>{e.exports=class{constructor(e,t){this.name=t,this.isTurn=null,this.isCPU=e||!1,this.playHistory=new Array,this.gameboard=null,this.isReady=!1,this.unplacedShips=new Array,this.isCPU&&(this.lastHit={coords:null,horizontal:null,backtracked:!1},this.enemyShipsRemaining=null)}setGameboard(e){this.gameboard=e}getUnplacedShips(){return this.unplacedShips.slice(0)}setShipArray(e){this.unplacedShips=e}addShips(e){const t=this.getUnplacedShips().concat(e);this.setShipArray(t)}positionShip(e,t,n,i){try{let r=this.unplacedShips.indexOf(n);if(-1==r){let e=new Error(this.name+" does not have ship of size "+n);throw e.name="ShipError",e}this.gameboard.placeShip(e,t,this.unplacedShips[r],i),this.unplacedShips.splice(r,1)}catch(e){throw e}}randomizeShips(){for(;0!=this.unplacedShips.length;)try{let e=Math.floor(Math.random()*this.gameboard.height),t=Math.floor(Math.random()*this.gameboard.width),n=Math.random()>.5;this.positionShip(e,t,this.unplacedShips[0],n)}catch(e){continue}}clearBoard(){const e=this.gameboard.removeShips();this.addShips(e)}setReady(e){this.isReady=e}setTurn(e){this.isTurn=e}toggleTurn(){this.isTurn=!this.isTurn}cpuAttack(e){let t,n,i=null;if(null!=this.lastHit.coords)if(this.enemyShipsRemaining.slice(-1)==this.lastHit.coords.length)this.lastHit.backtracked=!0;else{if([t,n]=this.lastHit.coords[0].split(" "),t=parseInt(t),n=parseInt(n),this.lastHit.horizontal||null===this.lastHit.horizontal)if(0==n||this.playHistory.includes([t,n-1].join("")))if(n+1==e.height||this.playHistory.includes([t,n+1].join(""))){if(this.lastHit.horizontal&&!1===this.lastHit.backtracked){let r=n-1;this.lastHit.backtracked=!0,r=this.lastHit.coords.includes([t,r].join(" "))?parseInt(this.lastHit.coords.slice(-1)[0].split(" ")[1])-1:parseInt(this.lastHit.coords.slice(-1)[0].split(" ")[1])+1,r>=0&&r<e.width&&!this.playHistory.includes([t,r].join(""))&&(i=this.sendAttack(t,r,e),i&&(this.lastHit.coords.push([t,r].join(" ")),this.lastHit.coords.reverse()))}}else i=this.sendAttack(t,n+1,e),i&&(this.lastHit.coords.unshift([t,n+1].join(" ")),this.lastHit.horizontal=!0);else i=this.sendAttack(t,n-1,e),i&&(this.lastHit.coords.unshift([t,n-1].join(" ")),this.lastHit.horizontal=!0);if(!this.lastHit.horizontal&&null===i)if(0==t||this.playHistory.includes([t-1,n].join("")))if(t+1==e.height||this.playHistory.includes([t+1,n].join(""))){if(!1===this.lastHit.horizontal&&!1===this.lastHit.backtracked){this.lastHit.backtracked=!0;let r=t-1;r=this.lastHit.coords.includes([r,n].join(" "))?parseInt(this.lastHit.coords.slice(-1)[0].split(" ")[0])-1:parseInt(this.lastHit.coords.slice(-1)[0].split(" ")[0])+1,r>=0&&r<e.height&&!this.playHistory.includes([r,n].join(""))&&(i=this.sendAttack(r,n,e),i&&(this.lastHit.coords.push([r,n].join(" ")),this.lastHit.coords.reverse()))}}else i=this.sendAttack(t+1,n,e),i&&(this.lastHit.coords.unshift([t+1,n].join(" ")),this.lastHit.horizontal=!1);else i=this.sendAttack(t-1,n,e),i&&(this.lastHit.coords.unshift([t-1,n].join(" ")),this.lastHit.horizontal=!1)}return null===i&&(this.lastHit.backtracked&&this.enemyShipsRemaining.splice(this.enemyShipsRemaining.indexOf(this.lastHit.coords.length),1),this.lastHit.coords=null,this.lastHit.horizontal=null,this.lastHit.backtracked=!1,i=this.randomAttack(e)),i}randomAttack(e){let t=Math.floor(Math.random()*e.height),n=Math.floor(Math.random()*e.width);for(;this.playHistory.includes([t,n].join(""));)t=Math.floor(Math.random()*e.height),n=Math.floor(Math.random()*e.width);const i=this.sendAttack(t,n,e);return i&&(this.lastHit.coords=[[t,n].join(" ")]),i}sendAttack(e,t,n){return this.playHistory.push([e,t].join("")),n.receiveAttack(e,t)}}},497:e=>{e.exports=function(e){if(!(e=parseInt(e)))throw new Error("Invalid ship length. Must be an integer between 2 and 5");const t=new Array(e).fill(!1);return{getLength:()=>e,getHitMap:()=>t.slice(0),hit:e=>{t[e]=!0},isHitAt:e=>t[e],isSunk:()=>t.every((e=>1==e))}}}},t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={id:i,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(379),t=n.n(e),i=n(28);t()(i.Z,{insert:"head",singleton:!1}),i.Z.locals,n(497);const r=n(733),a=n(507),s=n(324),o=[2,3,3,4,5];function l(e,t,n,i){e.isCPU||t.isCPU?(e.toggleTurn(),t.setTurn(!e.isTurn),n(e,t)):(s.renderBoards(e,t),e.toggleTurn(),t.setTurn(!e.isTurn),i?setTimeout((()=>{s.switchSides(e,t,n)}),150):s.switchSides(e,t,n))}function d(e,t,n){let i,r,a;if(e.isTurn?(i=e,r=t.gameboard):(i=t,r=e.gameboard),i.isCPU)a=i.cpuAttack(r);else{let e=n.target.dataset.row,t=n.target.dataset.column;a=i.sendAttack(e,t,r)}a?f(e,t):l(e,t,f,!0)}function c(){s.showStartMenu()}function h(){const[e,t]=s.readPlayerInput(),n=new a(...e),i=new a(...t),l=r(10,10),d=r(10,10);n.setGameboard(l),i.setGameboard(d),n.setShipArray(o.slice(0)),i.setShipArray(o.slice(0)),n.setTurn(Math.random()>.5),i.setTurn(!n.isTurn),n.isCPU&&(n.enemyShipsRemaining=o.slice(0)),i.isCPU&&(i.enemyShipsRemaining=o.slice(0)),s.renderPlayerNames(n,i),s.showGameUI(),g(n,i)}function p(e,t){let n;n=e.isTurn?e:t,n.clearBoard(),g(e,t)}function u(e,t,n,i,r,a){let s;s=e.isTurn?e:t;try{s.positionShip(n,i,r,a)}catch(e){if("RangeError"!=e.name||"ShipError"!=e.name)throw e}g(e,t)}function m(e,t){let n;n=e.isTurn?e:t,n.randomizeShips(),g(e,t)}function g(e,t){if(e.isReady&&t.isReady)s.clearDockButtons(),s.showPlayerElements(),f(e,t);else{let n;n=e.isTurn?e:t,n.isCPU?function(e,t){let n;n=e.isTurn?e:t,n.randomizeShips(),y(e,t)}(e,t):(s.displayInstructions(n.name+" is placing ships..."),function(e,t){s.renderBoards(e,t),s.renderDocks(e,t,p,m,y),e.isTurn&&0==e.getUnplacedShips().length||t.isTurn&&0==t.getUnplacedShips().length||s.addShipPlacementListeners(e,t,u)}(e,t))}}function y(e,t){let n;return n=e.isTurn?e:t,0==n.unplacedShips.length&&(n.setReady(!0),l(e,t,g,!1),!0)}function f(e,t){if(e.gameboard.allShipsSunk())b(e,t,!1);else if(t.gameboard.allShipsSunk())b(e,t,!0);else if(e.isTurn&&e.isCPU||t.isTurn&&t.isCPU)e.isCPU&&t.isCPU?(s.renderBoards(e,t),setTimeout((()=>{d(e,t)}),150)):d(e,t);else{let n;n=e.isTurn?e.name:t.name,s.displayInstructions(n+" is attacking"),s.renderBoards(e,t),s.addAttackListeners(e,t,d)}}function b(e,t,n){e.setTurn(!0),t.setTurn(!0),s.renderBoards(e,t),n?s.displayWinner(e,t):s.displayWinner(t,e),s.showGameOver()}document.querySelector("#new-game").addEventListener("click",h),document.querySelector("#rematch").addEventListener("click",h),document.querySelector("#change-players").addEventListener("click",c),c()})()})();